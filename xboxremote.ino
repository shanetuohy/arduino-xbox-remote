/*
 *Control an original Xbox using an Arduino and an IR LED
 *IR LED must be connected to port 3 of the Arduino
 
 *Shane Tuohy 2014
 *MIT License
 
 *Up - w
 *Down - s
 *Left - a
 *Right - d
 *Play - p
 *Back - b
 *Select - #
 
 */
 
//Requires Ken Shirriffs IR library
#include <IRremote.h>
 
IRsend irsend;
unsigned int down[51] ={4000 , 4000,    //header
600,900,600,1900,600,900,600,1900,      //first 4 bytes (0101)
600,900,600,1900,600,900,600,1900,      //0101
600,1900,600,900,600,900,600,900,       //1000
600,1900,600,900,600,1900,600,900,      //1010
600,1900,600,900,600,1900,600,900,      //1010
600,900,600,1900,600,1900,600,1900,     //0111
600};                                   //ptrail value
 
unsigned int select[51] = {4000 , 4000,
600,900,600 , 1900,600  , 900,600 , 1900,
600 , 1900,600 , 1900,600 , 1900,600 , 1900,
600  , 900, 600 , 1900, 600  , 900, 600  , 900,
600,1900,600,900,600,1900,600,900,
600  , 900,600  , 900,600  , 900,600  , 900,
600 , 1900,600  , 900,600 , 1900,600 , 1900,
600};
 
unsigned int up[51] = {4000 , 4000,
600,900,600 , 1900,600  , 900,600 , 1900,
600,900,600 , 1900,600  , 900,600 , 1900
,600 , 1900, 600  , 900, 600  , 900, 600  , 1900,
600 , 1900,600  , 900,600 , 1900, 600  , 900,
600 , 1900,600  , 900,600 , 1900, 600  , 900,
600  , 900,600 , 1900,600 , 1900,600 , 900,
600};
 
unsigned int back[51] = {4000 , 4000,
600,900,600 , 1900,600  , 900,600 , 1900,
600,900,600,900,600,1900,600,900,
600,900,600,1900,600,1900,600,1900,
600,1900,600,900,600,1900,600,900,
600, 1900,600,1900,600, 900,600,1900,
600, 1900,600,900,600, 900,600,900,
600};
 
unsigned int play[51] = {4000 ,4000,
600,900,600,1900,600,900,600,1900,
600,900,600,900,600,900,600,1900,
600,900,600,1900,600,900,600,1900,
600,1900,600,900,600,1900,600,900,
600,1900,600,1900,600,1900,600,900,
600,1900,600,900,600,1900,600,900,
600};
 
unsigned int left[51] = {
4000 ,4000,600,900,600,1900,600,900,600,1900,
600,900,600,1900,600,900,600,1900,
600,900,600,1900,600,1900,600,900,
600,1900,600,900,600,1900,600,900,
600,1900,600,900,600,1900,600,900,
600,1900,600,900,600,900,600,1900,600};
 
unsigned int right[51]= {4000 ,4000,
600,900,600,1900,600,900,600,1900,
600,900,600,1900,600,900,600,1900,
600,900,600,1900,600,1900,600,1900,
600,1900,600,900,600,1900,600,900,
600,1900,600,900,600,1900,600,900,
600,1900,600,900,600,900,600,900,
600};
 
 
int incomingByte = 0;
 
void setup()
{
  Serial.begin(9600);
}
 
void loop() {
 
  if (Serial.available()>0){
   
    incomingByte = Serial.read();
    //s
    if (incomingByte == 115){
    irsend.sendRaw(down, 51, 56);}
    //w
    if (incomingByte == 119){
    irsend.sendRaw(up, 51, 56);}
    //#
    if (incomingByte == 35){
    irsend.sendRaw(select, 51, 56);}
    //b
     if (incomingByte == 98){
    irsend.sendRaw(back, 51, 56);}
    //p
    if (incomingByte == 112){
    irsend.sendRaw(play, 51, 56);}
    //a
    if (incomingByte == 97){
    irsend.sendRaw(left, 51, 56);}
    //d
    if (incomingByte == 100){
    irsend.sendRaw(right, 51, 56);}
 
    //Print confirmation that byte was recieved
    Serial.println(incomingByte);
    incomingByte =0;
   
  }
 
  }
